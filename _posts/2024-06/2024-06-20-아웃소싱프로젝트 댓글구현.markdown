---
layout: post
title:  "TIL(20240620) [ì•„ì›ƒì†Œì‹±í”„ë¡œì íŠ¸: ëŒ“ê¸€ êµ¬í˜„]"
date:  2024-06-20
categories: TIL Spring
---

---------------------------------------------------------------------

# ğŸ“Œ Spring

## ğŸ’¡ ì•„ì›ƒì†Œì‹± í”„ë¡œì íŠ¸ : ëŒ“ê¸€ êµ¬í˜„

```java

@RestController
@RequestMapping("/api/posts")
@RequiredArgsConstructor
public class CommentController {

  private final CommentService commentService;

  // ëŒ“ê¸€ ì‘ì„±
  @PostMapping("/{postId}/comments")
  public ResponseEntity<CommentResponseDto> createComment(@PathVariable Long postId,
      @RequestBody @Valid CommentRequestDto requestDto,
      @AuthenticationPrincipal UserDetailsImpl userDetails) {
    return ResponseEntity.status(HttpStatus.CREATED)
        .body(commentService.createComment(postId, requestDto, userDetails.getUser()));
  }

  // ì„ íƒí•œ ê²Œì‹œë¬¼ì˜ ëŒ“ê¸€ ì¡°íšŒ
  @GetMapping("/{postId}/comments")
  public ResponseEntity<List<CommentResponseDto>> getComments(@PathVariable Long postId) {
    return ResponseEntity.status(HttpStatus.OK).body(commentService.getComments(postId));
  }

  // ëŒ“ê¸€ ìˆ˜ì •
  @PutMapping("/{postId}/comments/{commentId}")
  public ResponseEntity<CommentResponseDto> updateComment(@PathVariable Long postId,
      @PathVariable Long commentId,
      @RequestBody @Valid CommentRequestDto requestDto,
      @AuthenticationPrincipal UserDetailsImpl userDetails) {
    return ResponseEntity.status(HttpStatus.OK)
        .body(commentService.updateComment(postId, commentId, requestDto, userDetails.getUser()));
  }

  // ëŒ“ê¸€ ì‚­ì œ
  @DeleteMapping("/{postId}/comments/{commentId}")
  public ResponseEntity<String> deleteComment(@PathVariable Long postId,
      @PathVariable Long commentId,
      @AuthenticationPrincipal UserDetailsImpl userDetails) {
    commentService.deleteComment(postId, commentId, userDetails.getUser());
    return ResponseEntity.status(HttpStatus.OK).body("ëŒ“ê¸€ì´ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
  }

}

```

```java

@Service
@RequiredArgsConstructor
public class CommentService {

  private final CommentRepository commentRepository;
  private final PostService postService;

  // ëŒ“ê¸€ ì‘ì„±
  public CommentResponseDto createComment(Long postId, CommentRequestDto requestDto, User user) {
    Post post = findPostById(postId);
    Comment comment = commentRepository.save(new Comment(requestDto, post, user));
    return new CommentResponseDto(comment);
  }

  // ëŒ“ê¸€ ì¡°íšŒ
  public List<CommentResponseDto> getComments(Long postId) {
    Post post = findPostById(postId);
    List<Comment> comments = post.getComments();
    List<CommentResponseDto> commentList = new ArrayList<>();
    for (Comment comment : comments) {
      commentList.add(new CommentResponseDto(comment));
    }
    return commentList;
  }

  // ëŒ“ê¸€ ìˆ˜ì •
  @Transactional
  public CommentResponseDto updateComment(Long postId, Long commentId, CommentRequestDto requestDto,
      User user) {
    Post post = findPostById(postId);
    Comment comment = findCommentById(commentId);
    if (!comment.getUser().getUserSeq().equals(user.getUserSeq())) {
      throw new CustomException(ErrorCode.COMMENT_NOT_USER);
    }
    comment.updateComment(requestDto);
    return new CommentResponseDto(comment);
  }

  // ëŒ“ê¸€ ì‚­ì œ
  public void deleteComment(Long postId, Long commentId, User user) {
    Comment comment = findCommentById(commentId);
    if (!comment.getUser().getUserSeq().equals(user.getUserSeq())) {
      throw new CustomException(ErrorCode.COMMENT_NOT_USER);
    }
    commentRepository.delete(comment);
  }

  public Comment findCommentById(Long commentId) {
    return commentRepository.findById(commentId).orElseThrow(() ->
        new CustomException(ErrorCode.COMMENT_NOT_FOUND));
  }

  private Post findPostById(Long postId) {
    return postService.findById(postId);
  }

}

```

```java

@Entity
@Getter
@Table(name = "post")
@NoArgsConstructor
public class Post extends Timestamped {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "userId", nullable = false)
    private User user;

    @Column(nullable = false)
    private String title;

    @Column(nullable = false)
    private String content;

    @OneToMany(mappedBy = "post", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Comment> comments;

    public Post(PostRequestDto requestDto, User user) {
        this.title = requestDto.getTitle();
        this.content = requestDto.getContent();
        this.user = user;
    }

    public void update(PostRequestDto requestDto) {

        if (requestDto.getTitle() != null) {
            this.title = requestDto.getTitle();
        }
        if (requestDto.getContent() != null) {
            this.content = requestDto.getContent();
        }
    }

```

------------------------------------------------------------------

## ğŸ“Œ ì½”ë”©í…ŒìŠ¤íŠ¸1ï¸âƒ£ : í¬ê¸°ê°€ ì‘ì€ ë¶€ë¶„ ë¬¸ìì—´

### ğŸ”’ ë¬¸ì œ : ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ ë¬¸ìì—´ tì™€ pê°€ ì£¼ì–´ì§ˆ ë•Œ, tì—ì„œ pì™€ ê¸¸ì´ê°€ ê°™ì€ ë¶€ë¶„ë¬¸ìì—´ ì¤‘ì—ì„œ, ì´ ë¶€ë¶„ë¬¸ìì—´ì´ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜ê°€ pê°€ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ê²ƒì´ ë‚˜ì˜¤ëŠ” íšŸìˆ˜ë¥¼ returní•˜ëŠ” í•¨ìˆ˜ solutionì„ ì™„ì„±í•˜ì„¸ìš”. ì˜ˆë¥¼ ë“¤ì–´, t="3141592"ì´ê³  p="271" ì¸ ê²½ìš°, tì˜ ê¸¸ì´ê°€ 3ì¸ ë¶€ë¶„ ë¬¸ìì—´ì€ 314, 141, 415, 159, 592ì…ë‹ˆë‹¤. ì´ ë¬¸ìì—´ì´ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜ ì¤‘ 271ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ìˆ˜ëŠ” 141, 159 2ê°œ ì…ë‹ˆë‹¤.

### ğŸš« ì¡°ê±´ : 
- 1 â‰¤ pì˜ ê¸¸ì´ â‰¤ 18
- pì˜ ê¸¸ì´ â‰¤ tì˜ ê¸¸ì´ â‰¤ 10,000
- tì™€ pëŠ” ìˆ«ìë¡œë§Œ ì´ë£¨ì–´ì§„ ë¬¸ìì—´ì´ë©°, 0ìœ¼ë¡œ ì‹œì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.


## ğŸ”“ ë¬¸ì œí’€ì´

```java

class Solution {
    public int solution(String t, String p) {
        int answer = 0;
        long pNum = Long.parseLong(p);
        for(int i=0; i<t.length() - p.length() + 1; i++){ 
            String str = t.substring(i, i + p.length()); // të¥¼ pë¬¸ìì—´ ê¸¸ì´ë§Œí¼ ìë¥´ê¸°
            if (Long.parseLong(str) <= pNum){ // ì‘ê±°ë‚˜ ê°™ì„ë•Œ 
                answer++;
            }
        }
        return answer;
        }
    }

```
