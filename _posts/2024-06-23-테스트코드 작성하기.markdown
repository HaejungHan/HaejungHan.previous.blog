---
layout: post
title:  "TIL(20240623) [ì•„ì›ƒì†Œì‹± í”„ë¡œì íŠ¸: ë‹¨ìœ„í…ŒìŠ¤íŠ¸]"
date:  2024-06-23
categories: TIL Spring
---

---------------------------------------------------------------------

# ğŸ“Œ Spring

## ğŸ’¡ ì•„ì›ƒì†Œì‹± í”„ë¡œì íŠ¸: í”„ë¡œí•„ Service ë‹¨ìœ„í…ŒìŠ¤íŠ¸

ì´ì „ì— êµ¬í˜„í–ˆë˜ í”„ë¡œí•„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ ì‘ì„±ì„ í•˜ë ¤ê³  í•œë‹¤.
ì•„ì§ í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±ì— ì„œíˆ´ê¸° ë•Œë¬¸ì— ìµìˆ™í•´ì§€ê¸° ìœ„í•´ì„œ ê³„ì†í•´ì„œ
ì‘ì„±í•´ë³´ë ¤ê³  ë…¸ë ¥í•´ì•¼í•  ê²ƒ ê°™ë‹¤.

```java
@ExtendWith(MockitoExtension.class)
class UserServiceTest {
  @InjectMocks
  private UserService userService;

  @Mock
  private PasswordEncoder passwordEncoder;

  @Mock
  private UserRepository userRepository;

  @Mock
  private PasswordHistoryRepository passwordHistoryRepository;

  private User testUser;

  @BeforeAll
  public void setUpTestUser() {
    testUser = User.builder()
        .userId("test12345")
        .userName("í…ŒìŠ¤íŠ¸ìœ ì €")
        .userPassword(passwordEncoder.encode("@test12345"))
        .userEmail("test@gmail.com")
        .description("í•œì¤„ì†Œê°œ")
        .authority(UserRoleEnum.USER)
        .build();
    userRepository.save(testUser);
  }
}
```

ë¨¼ì € setUpTestUserë¥¼ ë§Œë“¤ì–´ì£¼ê³ 

```java
// ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
    public UserResponseDto getUser(Long userSeq) {
        User user = findByUserSeq(userSeq);
        return new UserResponseDto(user);
    }
```

í”„ë¡œí•„ ì¡°íšŒ service ë‹¨ìœ„í…ŒìŠ¤í‹€ ë¨¼ì € í•´ë³´ë ¤ê³  í•œë‹¤.

```java
@Test
  @DisplayName("í”„ë¡œí•„ ì¡°íšŒ")
  void getUser() {
    // given
    given(userRepository.findById(anyLong())).willReturn(Optional.of(testUser));

    // when
    UserResponseDto responseDto = userService.getUser(1L);

    //then
    assertEquals(testUser.getUserId(), responseDto.getUserId());
  }
```



