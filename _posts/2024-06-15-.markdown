---
layout: post
title:  "TIL(20240615) [Controller MockMvc í…ŒìŠ¤íŠ¸ ì½”ë“œ]"
date:  2024-06-15
categories: TIL Spring
---

---------------------------------------------------------------------


# ðŸ“Œ Spring

## ðŸ’¡ Controller í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±í•˜ê¸°

Controller í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìž‘ì„±í•˜ê¸° ì•žì„œì„œ Controllerí…ŒìŠ¤íŠ¸ì—ì„œëŠ” ë¬´ì—‡ì„ ì²´í¬í•´ì•¼ í• ê¹Œ? ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆê³ , ë¬´ìž‘ì • í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ìž‘ì„±í•˜ê¸° ë³´ë‹¤ëŠ” Controllerì˜ ì±…ìž„ë²”ìœ„, ì–´ë–¤ê²ƒì„ í…ŒìŠ¤íŠ¸ í•˜ë©´ ì¢‹ì„ì§€ì— ëŒ€í•´ì„œ ì •ë¦¬ë¥¼ í•˜ê³  ì‹œìž‘í•œë‹¤ë©´ íš¨ìœ¨ì ìœ¼ë¡œ ì§„í–‰í•  ìˆ˜ ìžˆì„ ê²ƒ ê°™ì•„ ê°œë…ì •ë¦¬ë¥¼ í•˜ê³  ì‹œìž‘í•´ë³´ì•˜ë‹¤.

3 Layer Architecture ì¤‘ í´ë¼ì´ì–¸íŠ¸ì˜ ê°€ìž¥ ê°€ê¹Œì´ì—ì„œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” Controllerì— ëŒ€í•´
ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ ì¢‹ì„ì§€ ê°œë…ì •ë¦¬!

**Controllerì˜ ì±…ìž„ë²”ìœ„**

    1. http ìš”ì²­ì„ ë“£ê³ , http ì‘ë‹µì„ ì±…ìž„ì§„ë‹¤.
    2. http ìš”ì²­ì„ íŒŒì‹±í•˜ì—¬ ë“¤ì–´ì˜¨ ë°ì´í„°ë¥¼ ì—­ì§ë ¬í™” í•œë‹¤.
    3. http ìš”ì²­ êµ¬ë¯„ì„ ë¶„ì„í•˜ê³ , url/body/param ë“±ì˜ ë³€ìˆ˜ì—ì„œ java ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
    4. ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ ê²€ì¦í•œë‹¤. 
    5. ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§(service)ë¥¼ í˜¸ì¶œí•œë‹¤.
    6. ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì˜ ì¶œë ¥ì„ http ì‘ë‹µìœ¼ë¡œ ì§ë ¬í™” í•œë‹¤.
    7. ì²˜ë¦¬ ë„ì¤‘ì— ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ì‚¬ìš©ìžì—ê²Œ ì˜¤ë¥˜ë©”ì„¸ì§€ì™€ http ìƒíƒœì‘ë‹µì„ í•œë‹¤.

ì´ë ‡ê²Œ ì •ë¦¬ë¥¼ í•œë²ˆ í•˜ê³  ë‚˜ë‹ˆ Controllerê°€ ë§Žì€ ì¼ë“¤ì„ í•˜ê³  ìžˆêµ¬ë‚˜ ë¼ê³  ìƒê°í–ˆë˜ ê²Œ ë‹¤ì‹œ í•œë²ˆ ë˜ìƒˆê¹€ì§ˆì´ ë˜ì—ˆê³ , Controllerì—ëŠ” ë¹„ì§€ë‹ˆìŠ¤ë¡œì§ì„ ë‘ì§€ ë§ë¼ê³  í•˜ëŠ” ì´ìœ ë„ ë°”ë¡œ ìœ„ì˜ ì±…ìž„ë²”ìœ„ê°€ ì¶©ë¶„ížˆ ë§Žê¸° ë•Œë¬¸ì—
ì—­í•  ë¶„ë¦¬ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìžˆë‹¤. 

ê·¸ë ‡ë‹¤ë©´ ì–´ë–¤ê±¸ Controllerì—ì„œ í…ŒìŠ¤íŠ¸ í•´ì•¼í•˜ëŠ”ê°€?

    1. Controllerê°€ í•´ë‹¹ urlì„ ìž˜ ì½ì–´ë“¤ì´ëŠ” ì§€ í™•ì¸
    2. ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ ì›í•˜ëŠ” java objectë¡œ ì§ë ¬í™”ê°€ ë˜ëŠ”ì§€ í™•ì¸
    3. ë“¤ì–´ì˜¨ ë°ì´í„°ì˜ validation í™•ì¸ì´ ìž˜ ë˜ëŠ”ì§€
    4. ë¹„ì§€ë‹ˆìŠ¤ë¡œì§ì„ ìž˜ í˜¸ì¶œ í–ˆëŠ”ì§€
    5. http ì‘ë‹µ ë³¸ë¬¸ì— jsoní˜•íƒœë¡œ ìž˜ ë“¤ì–´ê°”ëŠ”ì§€ 
    6. ì˜ˆì™¸ì²˜ë¦¬ê°€ ìž˜ë˜ì—ˆëŠ”ì§€

ìŠ¤í”„ë§ë¶€íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” Controllerì˜ ëŒ€í‘œì ì¸ @SpringBootTest, @WebMvcTest ì–´ë…¸í…Œì´ì…˜ ì¤‘
@WebMvcTest ë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ë ¤ê³  í•œë‹¤. 


**@WebMvcTest vs @SpringBootTest**
  - @SpringBootTest ëŠ” í”„ë¡œì íŠ¸ì˜ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•˜ì—¬ ë¹ˆì„ ì£¼ìž…í•˜ê¸° ë•Œë¬¸ì— ì†ë„ê°€ ëŠë¦¬ê³ , í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ ë§Žì´ ì‚¬ìš©í•œë‹¤.
  - í•„ìš”í•œ ë¹ˆë§Œì„ ë“±ë¡í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³ ìž í•œë‹¤ë©´ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ì¸ @WebMvcTestë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ë‹¤.

**í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„± ìˆœì„œ**

1) MockMvcë¥¼ í†µí•´ì„œ API í˜¸ì¶œ, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì˜ì¡´í•˜ê³  ìžˆëŠ” ê°ì²´ëŠ” Mockê°ì²´ë¡œ ë§Œë“¤ì–´ ì£¼ìž…(@MockBean)ì‚¬ìš©í•˜ê¸°
2) Mock ê°ì²´ëŠ” "ê°€ì§œ ê°ì²´" ë¼ ë¦¬í„´ ê°’ì´ ì—†ê¸°ì— given, when ë“±ìœ¼ë¡œ ì›í•˜ëŠ” ê°’ì„ ë¦¬í„´í•˜ë„ë¡ ì¡°ìž‘í•´ì¤˜ì•¼ í•¨
3) ë¡œì§ì´ ì§„í–‰ëœ í›„ verifyë¥¼ í†µí•´ ê²€ì¦í•˜ê¸°



-------------------------------------------------------------------------

# ðŸ“Œ ì½”ë”©í…ŒìŠ¤íŠ¸1ï¸âƒ£ : 3ì§„ë²• ë’¤ì§‘ê¸°

### ðŸ”’ ë¬¸ì œ : ìžì—°ìˆ˜ nì´ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. nì„ 3ì§„ë²• ìƒì—ì„œ ì•žë’¤ë¡œ ë’¤ì§‘ì€ í›„, ì´ë¥¼ ë‹¤ì‹œ 10ì§„ë²•ìœ¼ë¡œ í‘œí˜„í•œ ìˆ˜ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.

### ðŸš« ì¡°ê±´ : nì€ 1 ì´ìƒ 100,000,000 ì´í•˜ì¸ ìžì—°ìˆ˜ìž…ë‹ˆë‹¤.

## ðŸ”“ ë¬¸ì œí’€ì´

```java

class Solution {
    public int solution(int n) {
        int answer = 0;
        String s = ""; // nì˜ ë‚˜ë¨¸ì§€ë¥¼ ë„£ê¸° ìœ„í•œ ë³€ìˆ˜
        
        while(n!=0){
            s += n % 3; // ë’¤ì§‘ì–´ ë„£ê¸°
            n /= 3; // nê°’ ë³€ê²½
        }
        
        answer = Integer.parseInt(s,3); // 3ì§„ìˆ˜ -> 10ì§„ìˆ˜
        return answer;
    }
}

```

ê·¸ë ‡ë‹¤ë©´ 10ì§„ë²•ì„ 3ì§„ë²•ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì€?

```java

// 10ì§„ìˆ˜ -> 3ì§„ìˆ˜
Integer.toString(s,3);

// 3ì§„ìˆ˜ -> 10ì§„ìˆ˜
Integer.parseInt(s,3);

```