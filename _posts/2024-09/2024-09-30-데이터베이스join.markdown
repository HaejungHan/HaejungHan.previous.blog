---
layout: post
title:  "TIL(20240930) [ë°ì´í„°ë² ì´ìŠ¤/SQL-JOIN]"
date:  2024-09-30
categories: TIL
---

----------------------------------------------------------------------------

ì´ì „ì— ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í–ˆë˜ JOINì— ëŒ€í•´ì„œ ë‹¤ì‹œ ê³µë¶€ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.
ì´ë²ˆ ê¸°íšŒë¡œ í™•ì‹¤í•˜ê²Œ inner join, outer join(left, right, full) ì´í•´ë¥¼ í•´ë³´ì!

## ğŸ’¡ ë°ì´í„°ë² ì´ìŠ¤ `JOIN`
- join ì´ë€? ë‘˜ ì´ìƒì˜ í…Œì´ë¸”ì„ ì—°ê²°í•´ì„œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë°©ë²•ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- ì—°ê²°í•˜ë ¤ë©´ í…Œì´ë¸”ì´ ì ì–´ë„ í•˜ë‚˜ì˜ ì»¬ëŸ¼ì„ ê³µìœ í•˜ê³  ìˆì–´ì•¼ í•˜ê³ , ì´ ê³µìœ í•˜ê³  ìˆëŠ” ì»¬ëŸ¼ì„ PK OR FKê°’ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. 

## ğŸš©JOIN ì¢…ë¥˜
![image](https://github.com/user-attachments/assets/70288c48-bb2a-4fc1-9de8-059c73b85016)
- INNER JOIN : ë‚´ë¶€ì¡°ì¸-> êµì§‘í•©
- LEFT/RIGHT JOIN: ë¶€ë¶„ì§‘í•©
- OUTER JOIN: ì™¸ë¶€ì¡°ì¸-> í•©ì§‘í•©
- ** ì˜¤ë¼í´ì€ OUTER JOINì´ ìˆì§€ë§Œ MYSQLì€ ì—†ê¸°ì— LEFT+RIGHTë¥¼ ì‚¬ìš©

ì ê·¸ëŸ¼ ì´ì œ ì‹¤ìŠµí•´ë³´ì

ë°ì´í„°ëŠ” ê³ ê°í…Œì´ë¸”, ìƒí’ˆí…Œì´ë¸”ì´ ìˆë‹¤.
ê³ ê°í…Œì´ë¸”ì— no ì´ primary keyì´ë©° ìƒí’ˆí…Œì´ë¸”ì—ëŠ” ê³ ê°í…Œì´ë¸”ì˜ noì˜ fk customer_idê°€ ìˆë‹¤.

```
create table customer
(
	no INT,
    name varchar(10),
    join_date date,
    primary key(no)
)
```

```
create table product
(
	no INT,
    name varchar(10),
    price INT,
    customer_id INT,
    primary key(no),
    foreign key(customer_id) references customer(no)
)
```

### ğŸš©INNER JOIN 
![image](https://github.com/user-attachments/assets/c94e77f1-75b4-43a0-addb-623468ca8643)
#### ìœ„ í…Œì´ë¸”ì—ì„œ innerjoinì„ í•œë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ ì–´ë–»ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ê¹Œ? 
`selectì—ì„œ ìš”êµ¬í•œ ë°ì´í„°ì— ë”°ë¼ customerê³¼ productì— ì •í™•íˆ ë§¤í•‘ë˜ëŠ” ë°ì´í„°ë§Œ ê°€ì ¸ì˜¨ë‹¤.`

ê·¸ë˜ì„œ ë‹¤ìŒê³¼ ê°™ì´ SQLë¬¸ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ë³´ì•˜ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

```
SELECT c.no, c.name, c.join_date, p.price FROM customer c INNER JOIN product p ON c.no = p.customer_id;
```

![image](https://github.com/user-attachments/assets/7c064a32-8e17-4efd-a145-9e09d63ecce2)

### ğŸš©LEFT JOIN
![image](https://github.com/user-attachments/assets/1cd503ad-636c-46c9-a2c9-f90ee60fe9eb)
![image](https://github.com/user-attachments/assets/38ad2610-ce64-4718-9ece-649f2ef3dd90)
#### LEFT JOINì€ ë‘ ê°€ì§€: ê³µí†µëœ ë¶€ë¶„+LEFTì— ìˆëŠ” ê±°ë§Œ/ì™¼ìª½ì— ìˆëŠ”ê±°ë§Œ 

ê·¸ë˜ì„œ ì²«ë²ˆì§¸ ê·¸ë¦¼ëŒ€ë¡œ í•œë‹¤ë©´ ê³µí†µëœ ë¶€ë¶„+LEFTì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•œë‹¤. 

```
SELECT c.name, c.join_date, p.price FROM customer c LEFT OUTER JOIN product p ON c.no = p.customer_id;
```

![image](https://github.com/user-attachments/assets/49a531f9-b87e-49ce-80e1-da01454f2ea0)

ë‘ ë²ˆì§¸ëŠ” ì™¼ìª½ì— ìˆëŠ”ê±°ë§Œ

```
SELECT c.name, c.join_date FROM customer c LEFT OUTER JOIN product p ON c.no = p.customer_id WHERE p.customer_id is null;
```
-> ìœ„ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” customerê³¼ productê°€ ë§¤í•‘ë˜ì–´ìˆì§€ ì•ŠëŠ” ë°ì´í„°ë§Œ ë¶ˆëŸ¬ì˜¤ê²Œ ë˜ëŠ” ê²ƒ

![image](https://github.com/user-attachments/assets/e3aa58b8-ffbe-4bb1-af1d-b71a56802bc6)

### ğŸš©RIGHT JOIN 
![image](https://github.com/user-attachments/assets/745300e7-9ecb-4b8b-b136-6f713321aea1)
![image](https://github.com/user-attachments/assets/76eef69f-d28c-486b-af2e-214e68395cd3)

rightë„ leftì™€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì€ ê°™ì§€ë§Œ ê¸°ì¤€ì´ rightë¼ëŠ” ê²ƒ!

ì²«ë²ˆì§¸ëŠ” ê³µí†µëœ ë¶€ë¶„+ rightì—ë§Œ ìˆëŠ” ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

```
SELECT p.name, p.price, c.name FROM customer c RIGHT OUTER JOIN product p ON p.customer_id = c.no;
```
![image](https://github.com/user-attachments/assets/6c74af9a-d6f9-466b-b9bb-8027ae0e85b0)

ë‘ ë²ˆì§¸ ì˜¤ë¥¸ìª½ì— ìˆëŠ”ê±°ë§Œ ê°€ì ¸ì˜¤ê¸°

```
SELECT p.name, p.price FROM customer c RIGHT OUTER JOIN product p ON p.customer_id = c.no WHERE c.no is null;
```
ë°ì´í„° ê²°ê³¼ì…‹ì´ ì—†ë‹¤.
productì— ë§¤í•‘ë˜ì–´ìˆì§€ ì•ŠëŠ” ë°ì´í„°ê°€ ì—†ê¸° ë•Œë¬¸ì—

### ğŸš© FULL OUTER JOIN
- ì¼ë‹¨ í˜„ì¬ mariaDBë¥¼ ì‚¬ìš©ì¤‘ì¸ë° mariaDBëŠ” full outer joinì„ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.
- left+rightë¥¼ í˜¼í•©í•˜ì—¬ union ëª…ë ¹ì–´ë¡œ í•¨ê»˜ ì‚¬ìš©í•´ì£¼ì–´ì•¼ í•œë‹¤.


ì°¸ê³ 
[DB joinì •ë¦¬](https://pearlluck.tistory.com/46)
