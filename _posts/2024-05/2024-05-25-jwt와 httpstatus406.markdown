---
layout: post
title:  "TIL(20240525) [Spring:JWT/HttpStatus:406]"
date:  2024-05-25
categories: TIL Spring DB ì½”ë”©í…ŒìŠ¤íŠ¸
---

---------------------------------------------------------------------

# ğŸ“Œ Spring

## ğŸ’¡ Spring ëŒ“ê¸€ ê¸°ëŠ¥ êµ¬í˜„ 1) ëŒ“ê¸€ ë“±ë¡

## ğŸ”’ HttpStatus: 406
:  HTTP (HyperText Transfer Protocol) 406 Not Acceptable í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜ ì‘ë‹µ ì½”ë“œëŠ” ì„œë²„ê°€ ìš”ì²­ì˜ ì‚¬ì „ ì½˜í…ì¸  í˜‘ìƒ í—¤ë”ì— ì •ì˜ ëœ í—ˆìš© ê°€ëŠ¥í•œ ê°’ ëª©ë¡ê³¼ ì¼ì¹˜í•˜ëŠ” ì‘ë‹µì„ ìƒì„± í•  ìˆ˜ ì—†ìœ¼ë©° ì„œë²„ê°€ ê¸°ë³¸ í‘œí˜„ì„ ì œê³µí•˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

```
//postman
{
    "timestamp": "2024-05-25T06:23:04.863+00:00",
    "status": 406,
    "error": "Not Acceptable",
    "path": "/api/schedule/1/comment"
}
```

Accept ë“±ì˜ í—¤ë”ì— ì í˜€ìˆëŠ” í˜•ì‹ì„ ìƒì„±í•´ ë‚¼ ìˆ˜ ì—†ì„ ê²½ìš° ë°œìƒí•œë‹¤ê³  í•˜ì—¬ 3ê°€ì§€ ê²½ìš°ë¡œ í™•ì¸ë˜ì—ˆë‹¤.

1. Jacksonë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ëŠ” ê²½ìš°, -> í”„ë¡œì íŠ¸ì˜ dependencies -> ê¸°ë³¸ì ìœ¼ë¡œ spring-boot-starter-web ì•ˆì— Jacksonë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ë˜ì–´ìˆìŒ
2. êµ¬ê¸€ë§ì„ í•œ ê²°ê³¼.. SpringBootì—ì„œ ìœ„ ì—ëŸ¬ê°€ ë‚˜ëŠ” ê²½ìš°ëŠ” ëŒ€ë¶€ë¶„ìœ¼ Getterë©”ì„œë“œê°€ ì—†ê¸°ë•Œë¬¸....ğŸ¤£

## ğŸ”“ í•´ê²°ë°©ë²•
: CommentResponseDtoì— Getterë©”ì„œë“œ ì¶”ê°€í•˜ë‹ˆ ë°˜í™˜ì´ ì˜ ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤..ğŸ˜

```
{
    "scheduleId": 1,
    "id": 13,
    "contents": "ëŒ“ê¸€",
    "createdAt": "2024-05-25T15:31:34.3566043"
}
```

## ğŸ’¡ JWT

- JWTê°€ ë¬´ì—‡ì¸ê°€? JWTëŠ” JSONí¬ë§·ì„ ì´ìš©í•˜ì—¬ ì‚¬ìš©ìì— ëŒ€í•œ ì†ì„±ì„ ì €ì¥í•˜ëŠ” Claimê¸°ë°˜ì˜ Web Tokenì´ë‹¤. í† í°ì˜ í•œ ì¢…ë¥˜ì´ë©° ì¼ë°˜ì ìœ¼ë¡œ ì¿ í‚¤ì €ì¥ì†Œì—ì„œ JWTë¥¼ ì €ì¥í•œë‹¤. 

- JWTì˜ ì¥ì ì€? ë™ì‹œ ì ‘ì†ìê°€ ë§ì„ ë•Œ ì„œë²„ì¸¡ ë¶€í•˜ë¥¼ ë‚®ì¶¤ (ì„œë²„ ìì²´ì—ì„œ Secret keyë¥¼ ê²€ì¦í•˜ê¸° ë•Œë¬¸ì—)
- JWTì˜ ë‹¨ì ì€? êµ¬í˜„ì˜ ë³µì¡ë„ ì¦ê°€, JWTì— ë‹´ëŠ” ë‚´ìš©ì´ ì»¤ì§ˆìˆ˜ë¡ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©ì´ ì¦ê°€í•˜ê²Œ ë¨, ê¸° ìƒì„±ëœ JWTë¥¼ ì¼ë¶€ë§Œ ë§Œë£Œì‹œí‚¬ ë°©ë²•ì´ ì—†ìœ¼ë©° secret keyê°€ ìœ ì¶œë  ê²½ìš° JWTê°€ ì˜¤í”ˆë˜ì–´ ìˆì–´ì„œ ì¡°ì‘ì´ ê°€ëŠ¥í•˜ê¸°ì— ë³´ì•ˆì— ì·¨ì•½í•¨

- JwtUtil ? JWtì˜ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ ê°€ì§„ í´ë˜ìŠ¤ ê°™ì€ ê°œë…

## ğŸ’¡ íŒ¨ìŠ¤ì›Œë“œ ì•”í˜¸í™”

1) **ì–‘ë°©í–¥ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜** 
- ì•”í˜¸í™”: í‰ë¬¸ -> ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ -> ì•”í˜¸ë¬¸
- ë³µí˜¸í™”: ì•”í˜¸ë¬¸ -> ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ -> í‰ë¬¸

2) **ë‹¨ë°©í–¥ ì•”í˜¸ ì•Œê³ ë¦¬ì¦˜**
- ì•”í˜¸í™” : í‰ë¬¸ -> ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ -> ì•”í˜¸í™”
- ë³µí˜¸í™” : âŒë¶ˆê°€!

ê·¸ë ‡ë‹¤ë©´, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•  ë•Œ ì•”í˜¸í™”ëœ íŒ¨ìŠ¤ì›Œë“œë¥¼ ê¸°ì–µí•´ì•¼ í•˜ëŠ”ê°€? 
: Password Mathing! booleaníƒ€ì…ì˜ .matches()ë¼ëŠ” ë©”ì„œë“œë¡œ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ == ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ êµ¬ë³„í•´ì¤€ë‹¤!

```
boolean matches(CharSequence rawPassword, String encodedPassword);
```
rawPassword : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸
encodedPassword : ì•”í˜¸í™”ë˜ì–´ DBì— ì €ì¥ëœ ë¹„ë°€ë²ˆí˜¸


---------------------------------------------------------------------

# â­ ë„¤íŠ¸ì›Œí¬ > ê¸°ìˆ ë©´ì ‘ ëŒ€ë¹„

1) RESTfulí•œ APIë¥¼ ì„¤ê³„í•˜ëŠ” ì¥ì ì€?
- Rest : ì›¹(HTTP)ì˜ ì¥ì ì„ í™œìš©í•œ ì•„í‚¤í…ì³
- Restì˜ ë“±ì¥ë°°ê²½ : ì¸í„°ë„·ê³¼ ê°™ì´ ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ ë“±ì¥í•¨ì— ë”°ë¼, ì´ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì§€ì¹¨ìœ¼ë¡œ ë§Œë“¤ì–´ì¡Œë‹¤. 
- Restì˜ ìš”ì†Œ : method(POST,GET,PUT,DELETE), Resource : URI(ìì›-ëª…ì‚¬ë¡œ í‘œí˜„), ë©”ì‹œì§€ í¬ë§·ì´ ì¡´ì¬(JSON,XML)
- Restì˜ íŠ¹ì§• : HTTP í‘œì¤€ì— ë”°ë¼ ì„¤ê³„í•œë‹¤ë©´ ì–´ë–¤ ê¸°ìˆ ë„ ê°€ëŠ¥í•œ interfaceìŠ¤íƒ€ì¼ ì¦‰, íŠ¹ì •ì–¸ì–´ë‚˜ ê¸°ìˆ ì— ì¢…ì† ë°›ì§€ ì•Šê³  ëª¨ë“  í”Œë«í¼ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•¨/ APIë©”ì‹œì§€ë§Œ ë³´ê³  APIë¥¼ ì´í•´í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°/ HTTP Sessionê³¼ ê°™ì€ ì»¨í…ìŠ¤íŠ¸ ì €ì¥ì— ìƒíƒœ ì •ë³´ë¥¼ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. 
- REST API : RESTê¸°ë°˜ìœ¼ë¡œ ì„œë¹„ìŠ¤ APIë¥¼ êµ¬í˜„í•œë‹¤ë¼ëŠ” ì˜ë¯¸ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°„ì˜ ì‹œìŠ¤í…œì´ ì¸í„°ë„·ì„ í†µí•´ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ êµí™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
- REST APIì˜ ì¥ì  : í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì—­í• ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ì—¬ ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì›í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ê°œë°œí•˜ì—¬ ë°°í¬í•  ìˆ˜ ìˆë‹¤.
- RESTfulì˜ ëª©ì  : ì´í•´í•˜ê¸° ì‰½ê³  ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ REST APIë¥¼ ë§Œë“œëŠ” ê²ƒ, ì¦‰ ì¼ê´€ì ì¸ ì»¨ë²¤ì…˜ì„ í†µí•œ APIì˜ ì´í•´ë„ ë° í˜¸í™˜ì„±ì„ ë†’ì´ëŠ” ê²ƒì´ë‹¤.

: restfulì€ ë­”ê°€, restful ì˜ ë°©ë²•ì€?, restfulì˜ ì¥ì ì€ ì´ê²ƒì´ë‹¤. .... 

2) ê´€ì‹¬ì‚¬ ë¶„ë¦¬
- ì¥ì : ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±, ì¬ì‚¬ìš©ì„±, í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.
- í•˜ë‚˜ì˜ ê´€ì‹¬ì‚¬ê°€ í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ë„ë¡ ì½”ë“œë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. í•œ ê°ì²´(í´ë˜ìŠ¤)ì•ˆì—ì„œ ë‹¤ì–‘í•œ ê´€ì‹¬ì‚¬ë¥¼ ìˆ˜í–‰í•˜ê²Œë˜ë©´ ì½”ë“œê°€
ë³µì¡í•´ì ¸ì„œ ì½”ë“œì— ëŒ€í•œ ì´í•´ë„ê°€ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ìœ ì§€ë³´ìˆ˜ì ì¸ ì¸¡ë©´ì—ì„œ ì•…ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤. 

: ì˜ˆë¥¼ ë“¤ì–´ì„œ ì„¤ëª…í•˜ì—¬ ìœ ì§€ë³´ìˆ˜,í™•ì¥ì„±ì´ ìš©ì´í•˜ë‹¤. + ê°€ë…ì„±, ì¬ì‚¬ìš©ì„± 2ê°œì´ìƒì˜ ë…¼ë¦¬ë¥¼ ì¶”ê°€í•œë‹¤. 

3) ë¬´ë¶„ë³„í•˜ê²Œ setterë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤ê³  í•˜ëŠ”ë° ê·¸ ì´ìœ ëŠ”? 
í”¼ë“œë°± : ê¸°ìˆ ì ì¸ ì—­ëŸ‰, ê¸°ìˆ ì˜ ê²¬í•´, ë¬¸ì œë¥¼ ì–´ë–»ê²Œ ë…¼ë¦¬ì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ”ê°€? ì¦ëª…í•´ì•¼í•œë‹¤. 
ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ëª…í•´ì•¼í•œë‹¤.  

ëª¨ë“  setterë°ì´í„°ë¥¼ ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤. .. ë°ì´í„° ë¬´ê²°ì„± ì†ìƒ, ë¶„ë³„ì„± ìœ„ë°˜, ë³´ì™„ì  ì¸¡ë©´ì—ì„œë„ ì¢‹ì§€ì•Šë‹¤. 

3-1) setterì‚¬ìš©í•˜ì§€ ì•Šê³  í•˜ëŠ”ë°©ë²•?
- ìƒì„±ì , íŠ¹ë³„í•œ ë©”ì„œë“œ ì‚¬ìš© (ë°ì´í„° ì£¼ì…)

4) ë°ì´í„°ë² ì´ìŠ¤ ì–´ë–¤ê²ƒì¸ê°€
- ê´€ê³„í˜•ë°ì´í„°ë² ì´ìŠ¤, ë¹„ê´€ê³„í˜•ë°ì´í„°ë² ì´ìŠ¤, ACID 

ì´í•´-> ì •ë¦¬-> ë‹µë³€

5) ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë¨ì€ ì–´ë–¤ê²ƒì¸ê°€?  (ì£¼ê´€ì ì¸ ê´€ì ì—ì„œ ì–˜ê¸°í•´ë³´ì)
- ê°ì²´, ìº¡ìŠí™”, ë‹¤í˜•ì„±.... ì–´ë–¤ê²ƒì´ ì¥ì ? 
- ì ˆì°¨ì ì¸ í”„ë¡œê·¸ë¨ ì–´ë–»ê²Œ ë³´ì™„í•œ í˜ëŸ¬ë‹¤ì„ ? 

ì„œë¡œ ëŒ€í™”í•˜ëŠ” í˜•ì‹.. í‹°í‚¤íƒ€ì¹´ì˜ í˜•ì‹ìœ¼ë¡œ!  

# ğŸ“Œ DB

- ë°ì´í„°ì¡°íšŒ

```
select 
    p.id, // product í…Œì´ë¸”ì—ì„œ id
    p.title as product_title, // product í…Œì´ë¸”ì—ì„œ title 
    pf.product_id as product_id, // Product_Folderí…Œì´ë¸”ì˜ Product_id
    pf.folder_id as folder_id // Product_Folderí…Œì´ë¸”ì˜ folder_id ë“¤ì„ ë³´ì—¬ì£¼ë©´ ë˜
from product p // product í…Œì´ë¸”ì—ì„œ
         left join product_folder pf on p.id = pf.product_id // product_folderì—ì„œì˜ product_idì™€ productí…Œì´ë¸”ì˜ idì™€ ê°™ìœ¼ë‹ˆê¹Œ í•©ì³ì„œ
where p.user_id = 1 // user_id 1ë²ˆì´ ê°€ì§„ 
and pf.folder_id = 4 // 4ë²ˆ í´ë” ì—ì„œ
order by p.id desc /// Product_idê°€ ë‚´ë¦¼ì°¨ìˆœì´ ë˜ì–´ì„œ
limit 20; // 20ê°œì”©ë§Œ ë³´ì´ë„ë¡ 

```

---------------------------------------------------------------------

# ğŸ“Œ ì½”ë”©í…ŒìŠ¤íŠ¸1ï¸âƒ£ : ì—†ëŠ” ìˆ«ì ë”í•˜ê¸°

## ğŸ”’ ë¬¸ì œ : 0ë¶€í„° 9ê¹Œì§€ì˜ ìˆ«ì ì¤‘ ì¼ë¶€ê°€ ë“¤ì–´ìˆëŠ” ì •ìˆ˜ ë°°ì—´ numbersê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§‘ë‹ˆë‹¤. numbersì—ì„œ ì°¾ì„ ìˆ˜ ì—†ëŠ” 0ë¶€í„° 9ê¹Œì§€ì˜ ìˆ«ìë¥¼ ëª¨ë‘ ì°¾ì•„ ë”í•œ ìˆ˜ë¥¼ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ì™„ì„±í•´ì£¼ì„¸ìš”.

## ğŸš« ì¡°ê±´ : 
- 1 â‰¤ numbersì˜ ê¸¸ì´ â‰¤ 9
- 0 â‰¤ numbersì˜ ëª¨ë“  ì›ì†Œ â‰¤ 9
- numbersì˜ ëª¨ë“  ì›ì†ŒëŠ” ì„œë¡œ ë‹¤ë¦…ë‹ˆë‹¤.


# ğŸ’¡ í•„ìš”í–ˆë˜ ë©”ì„œë“œ


# ğŸ”“ ë¬¸ì œí’€ì´

```java
// 1ì°¨ì‹œë„
class Solution {
    public int solution(int[] numbers) {
        int answer = 0;
        for(int i=0; i<10; i++){
          for(int j=0; j<numbers.length; i++){
              if(!(i == numbers[j])) {
                  answer+= i;
              }
          }

        }
        return answer;
    }
}

ì‹¤í–‰ ì‹œê°„ì´ 10.0ì´ˆë¥¼ ì´ˆê³¼í•˜ì—¬ ì‹¤í–‰ì´ ì¤‘ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤í–‰ ì‹œê°„ì´ ë” ì§§ì€ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”. => ğŸ¤£

class Solution {
    public int solution(int[] numbers) {
        int answer = 0;
        
        for(int i=0; i<10; i++){
            answer += i;
        }
        
        for(int i=0; i<numbers.length; i++){
            answer -= numbers[i];
        }
        return answer;
    }
}


```

## ğŸ¤·â€â™€ï¸ ì½”ë”©í…ŒìŠ¤íŠ¸1ï¸âƒ£ ë¬¸ì œí’€ì´ë¥¼ í•˜ë©´ì„œ ëŠë‚€ì 
: ìˆ˜í•™ì ìœ¼ë¡œ í’€ì–´ì•¼í•˜ëŠ” ë¬¸ì œì—¬ì„œ, ì œí•œì‚¬í•­ì„ ì‚´í´ë³´ë‹ˆ numbersì—ì„œ 0~9ê¹Œì§€ ì—†ëŠ” ìˆ«ìë§Œ ë¹¼ì„œ ë”í•˜ëŠ”ê±°ë‚˜
0~9 ìˆ«ìì˜ í•©ì—ì„œ numbersì—ë§Œ ìˆëŠ” ìˆ«ìì˜ í•©ì„ ëº€ ê²ƒê³¼ ê°™ë‹¤ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.
ê·¸ë˜ì„œ answerì— forë¬¸ì„ ëŒë ¤ì„œ 0~9 ìˆ«ìì˜ í•©ì„ ë„£ê³  numbersë°°ì—´ì˜ ìˆëŠ” ê°’ì„ forë¬¸ì„ ëŒë ¤ì„œ answerì—ì„œ ë¹¼ì£¼ë‹ˆ..
numbersì—ì„œ ì—†ë˜ ìˆ«ìì˜ í•©ì´ ë‚˜ì™”ë‹¤!


## ğŸˆ ì½”ë”©í…ŒìŠ¤íŠ¸1ï¸âƒ£ ë‹¤ë¥¸ì‚¬ëŒì˜ í’€ì´! 

```java

class Solution {
    public int solution(int[] numbers) {
        int sum = 45;
        for (int i : numbers) {
            sum -= i;
        }
        return sum;
    }
}


```
- í–¥ìƒëœ forë¬¸ì—ë„ ìµìˆ™í•´ì§ˆ ìˆ˜ ìˆë„ë¡ ë…¸ë ¥í•´ì•¼ê²Ÿë‹¤.. ã…ã…ã…;



