---
layout: post
title:  "TIL(20240813) [AWS ACM(SSLì¸ì¦ì„œë°œê¸‰) http->https]"
date:  2024-08-13
categories: TIL AWS HTTPS
---

----------------------------------------------------------------------------


ì•„ë˜ ë¸”ë¡œê·¸ë¥¼ ì°¸ê³ í•˜ì—¬ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
ì´ì „ê³¼ì •ê¹Œì§„ ì§„í–‰ì™„ë£Œí•œ ìƒíƒœë¼ ACM ì¸ì¦ì„œ ìš”ì²­ ë¶€í„° ì‘ì„±í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 

[EC2 HTTPSë¡œ ì—°ê²°í•˜ê¸°](https://woojin.tistory.com/m/93)

### âœ¨ ë“¤ì–´ê°€ê¸°ì „
- íŠ¹ì • IPì— ë¶€ì—¬ëœ naver.com, google.com ê³¼ ê°™ì€ ì£¼ì†Œë“¤ì„ ë„ë©”ì¸ì´ë¼ê³  í•©ë‹ˆë‹¤. https ì—°ê²°ì„ ìœ„í•´ì„œëŠ”, ë„ë©”ì¸ì„ ê°€ì§€ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
- ë„ë©”ì¸ì´ ì—†ì„ ê²½ìš° ì¸ì¦ì„œìš”ì²­ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ì €í¬ëŠ” "ê°€ë¹„ì•„"ì—ì„œ ë„ë©”ì¸ì„ êµ¬ë§¤í•˜ì˜€ìŠµë‹ˆë‹¤. 


## ğŸ’¡ 1. ACM ì¸ì¦ì„œ ìš”ì²­

AWS ì ‘ì† í›„ ê²€ìƒ‰ì°½ì— ACMì´ë¼ê³  ì¹˜ë©´ ì•„ë˜ Ceriticate managerê°€ ë‚˜ì˜¤ë©° í´ë¦­í•œ í›„ ë“¤ì–´ê°€ë©´ ì¸ì¦ì„œ ìš”ì²­ì´ë¼ëŠ” ë²„íŠ¼ í´ë¦­ 
![image](https://github.com/user-attachments/assets/c60fe074-1dd4-43bd-9db2-b70d26cea04e)

![image](https://github.com/user-attachments/assets/a464a2e3-edca-4c1d-849e-408f5fce1f48)

![image](https://github.com/user-attachments/assets/7595b6a2-6fc6-45b4-aedc-bba4a27b9c67)

** í˜¹ì‹œ ë™ì¼í•œ ë„ë©”ì¸ìœ¼ë¡œ ì—¬ëŸ¬ì‚¬ì´íŠ¸ë¥¼ ë³´í˜¸í•˜ê³  ì‹¶ìœ¼ì‹  ê²½ìš°ì—ëŠ” ì™€ì¼ë“œì¹´ë“œ (*)ë¥¼ ì‚¬ìš©í•´ì„œ
ex) *.challengersbod.store 
ë¼ê³  ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/a6d47634-b61c-4605-9666-6ed027c1b8cc)

![image](https://github.com/user-attachments/assets/5d57779a-90b5-40e5-8a3e-33282c22655a)

ìš”ì²­!

## ğŸ’¡ 2. ë°œê¸‰ë°›ì€ ì¸ì¦ì„œ Route53 ë ˆì½”ë“œ ìƒì„±

ë°œê¸‰ë°›ì€ ì¸ì¦ì„œ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ê²Œ ë˜ë©´

![image](https://github.com/user-attachments/assets/9c6ba3f8-13a4-4948-b0ec-6928fe987758)

í˜„ì¬ ì €ëŠ” ë°œê¸‰ë°›ì€ ìƒíƒœë¼ ì„±ê³µì´ë¼ê³  ëœ¨ì§€ë§Œ ì•„ë‹ˆë¼ë©´ ëŒ€ê¸°? ì•„ë‹ˆë©´ ê²€ì¦ì¤‘ì´ë¼ê³  ëœ° ê²ƒ ê°™ìŠµë‹ˆë‹¤. 

ë°œê¸‰ì „ì´ë©´ ë„ë©”ì¸ ì•ì— ì²´í¬ë°•ìŠ¤ê°€ ìˆëŠ”ë°, ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­ í›„ 
ë ˆì½”ë“œ ìƒì„± í´ë¦­

## ğŸ’¡ 3. EC2 ë³´ì•ˆê·¸ë£¹ ê·œì¹™ ì¶”ê°€

í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ë³´ì•ˆê·¸ë£¹ìœ¼ë¡œ ë“¤ì–´ì™€ì„œ ì¸ë°”ìš´ë“œ ê·œì¹™ì„ ì¶”ê°€

![image](https://github.com/user-attachments/assets/4e8b5b50-9cc7-4a88-961c-33e7b60e590f)

![image](https://github.com/user-attachments/assets/39af6953-2595-4324-8eb8-4ed3843b423d)

https 443 ip4 ip6 ,
http 8080(ë°±ì—”ë“œ), 80(í”„ë¡ íŠ¸) ip4/ip6 ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
-> HTTP, HTTPS ëª¨ë“  ìš”ì²­ì„ ì—´ì–´ì¤€ë‹¤ëŠ” ì˜ë¯¸

ì•„ì§ AWSì— ëŒ€í•´ì„œ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªëŠ” ì¤‘ì´ë¼ ë¶€ì •í™•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜„ì¬ docker composeë¡œ CI/CD êµ¬ì¶•í•œ ìƒíƒœì…ë‹ˆë‹¤.
docker.yaml íŒŒì¼ì— depends on ë°±ì—”ë“œê°€ ë˜ì–´ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.
ê·¸ë˜ì„œ í•´ë‹¹ ì„¤ì •ì„ ì €ë ‡ê²Œ í•´ì¤€ ìƒíƒœì…ë‹ˆë‹¤.

## ğŸ’¡ 4. EC2 ëŒ€ìƒê·¸ë£¹ ìƒì„±
-> ì¸ìŠ¤í„´ìŠ¤ì˜ ê°€ìš©ì˜ì—­ í™•ì¸/ë³´ì•ˆê·¸ë£¹ í™•ì¸ í•„ìš”

![image](https://github.com/user-attachments/assets/b9b49137-9f88-40fa-b879-5d01e55b4170)

ëŒ€ìƒê·¸ë£¹ ìƒì„± í´ë¦­

![image](https://github.com/user-attachments/assets/bcce5358-de69-4000-81fb-6ce31a3dc37c)


![image](https://github.com/user-attachments/assets/7e802538-d0b6-4c12-a4ed-4ae08b71de30)

ëŒ€ìƒì´ë¦„ì„ ë§ê²Œ ì‘ì„±í•´ì£¼ê³  ì €í¬ëŠ” ë°±ì—”ë“œë¥¼ 8080í¬íŠ¸ë¡œ ì„¤ì •í•´ë†“ì•˜ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  VPCë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.(í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì™€ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.) ê·¸ë¦¬ê³  ë‹¤ìŒë²„íŠ¼ í´ë¦­!

![image](https://github.com/user-attachments/assets/73cf4165-e1ba-428f-adb8-697af8dd79ba)

ì•„ë˜ ë³´ë¥˜ì¤‘ì¸ê²ƒìœ¼ë¡œ í¬í•¨ í´ë¦­ 

ì €í¬ëŠ” ëŒ€ìƒ ê·¸ë£¹ì„ í”„ë¡ íŠ¸ë„ ì¶”ê°€í•˜ì˜€ê³ , í¬íŠ¸ëŠ” 80ìœ¼ë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

## ğŸ’¡ 4. ë¡œë“œë°¸ëŸ°ì„œ ìƒì„±

ec2ì˜ ë¡œë“œë°¸ëŸ°ì‹± ì•„ë˜ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í´ë¦­í•©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/97c682cd-581c-4a99-b9d1-33ae36e51933)

![image](https://github.com/user-attachments/assets/f2d83b4e-169d-4a1e-ba39-613e34edb81c)

![image](https://github.com/user-attachments/assets/3f972f4d-cd07-44f4-b989-3506e1890b3d)

ë¡œë“œë°¸ëŸ°ì„œ ì´ë¦„ì„ ì‘ì„±í•´ì£¼ì‹œê³ 

![image](https://github.com/user-attachments/assets/3dc3deca-91a3-48ef-96cc-2199db580447)

í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ VPCì„ íƒ í›„ í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ê°€ìš©ì˜ì—­,ì„œë¸Œë„·ì„ ì„ íƒí•´ì¤ë‹ˆë‹¤.(ë„¤íŠ¸ì›Œí¬ ë§¤í•‘) ì¸ìŠ¤í„´ìŠ¤ì˜ ì„¸ë¶€ì •ë³´ì—ì„œ ê°€ìš©ì˜ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° 2ê°œì´ìƒ ì²´í¬ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤. 


í•´ë‹¹ ì¸ìŠ¤í„´ìŠ¤ì˜ ë³´ì•ˆê·¸ë£¹ì„ ì„¤ì •í•´ì£¼ì‹œê³  
8080ì— í•´ë‹¹í•˜ëŠ” ëŒ€ìƒê·¸ë£¹ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.

----ì´ë¶€ë¶„ì—ì„œëŠ” ì •í™•í•œ ë°©ë²•ì¸ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ í˜„ì¬ ì €í¬ í”„ë¡œì íŠ¸ ìƒíƒœì—ì„œ ë§ì¶° ì§„í–‰í•œ ë¶€ë¶„ì´ë‹ˆ ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.

ë°±ì—”ë“œ->
![image](https://github.com/user-attachments/assets/e849ad37-4950-4f8e-bc26-6dedeaf13722)
challegers-lb-target(ë°±ì—”ë“œ)

í”„ë¡ íŠ¸->
![image](https://github.com/user-attachments/assets/3e2eb804-64c1-442d-8269-4134e896b3ff)
challegers-front-lb-target(í”„ë¡ íŠ¸)

![image](https://github.com/user-attachments/assets/fb192a92-9f58-4e85-9c02-315f61d2976b)

ê·¸ë¦¬ê³  ì•„ë˜ ACMì—ì„œ ë°œê¸‰ë°›ì€ ì¸ì¦ì„œë¥¼ ì„ íƒí•´ì£¼ê³  ë¡œë“œë°¸ëŸ°ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 

ìƒì„±í•œ ë¡œë“œë°¸ëŸ°ì„œ ì•ˆìœ¼ë¡œ ë“¤ì–´ê°€ ë¦¬ìŠ¤ë„ˆ ë° ê·œì¹™ì„ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë“±ë¡ë˜ì–´ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/47099e9a-a0db-4f8d-adfb-71460e4ae266)

## ğŸ’¡ 5. ë„ë©”ì¸ ë ˆì½”ë“œ ìƒì„±
route53ìœ¼ë¡œ ì´ë™.
Aë ˆì½”ë“œë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ê³¼ì •ì…ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/81877afc-a304-473b-a6d4-28dd0dfad362)

í•´ë‹¹ í˜¸ìŠ¤íŒ… ì˜ì—­ìœ¼ë¡œ ë“¤ì–´ê°€ì„œ

![image](https://github.com/user-attachments/assets/0bcd0b5e-678b-4865-955a-1ffbb21047ee)

![image](https://github.com/user-attachments/assets/875ab7a5-73f5-4580-be98-6914f4c9f1c9)

ë³„ì¹­ìœ¼ë¡œ ë°”ê¿”ì£¼ê³  ì•„ë˜ì™€ ê°™ì´ ì„¤ì • ì•„ê¹Œ ìƒì„±í–ˆë˜ ë¡œë“œë°¸ëŸ°ì„œë¥¼ ì²´í¬í•´ì£¼ê³  ë ˆì½”ë“œ ìƒì„± í•˜ì‹œë©´ ë©ë‹ˆë‹¤!

![image](https://github.com/user-attachments/assets/c6e3f2d7-f656-49fd-9b1e-68d7dfa1b1ce)

Aê°€ ìƒì„±ë˜ì—ˆë‹¤ë©´ ì™„ë£Œ!

```
vue.jsë¡œ êµ¬í˜„í•˜ì…¨ë‹¤ë©´ axios.js ì„¤ì •ì— ë°±ì—”ë“œ ì„œë²„ë¥¼ httpsì™€ í•´ë‹¹ë„ë©”ì¸ ì£¼ì†Œ :8080ì„ ë¶™ì—¬ ìˆ˜ì •í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.
ex) https://challengersbod.store:8080
ê·¸ë¦¬ê³  ë°±ì—”ë“œ webconfig ê´€ë ¨í•´ì„œ allowedOriginë„ https, ë„ë©”ì¸ì£¼ì†Œë¡œ ë³€ê²½í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.(CORSì„¤ì •)
ex) https://challegersbod.store
```
---------------------------------------------------------

ê°œë…ì •ë¦¬ê°€ í•„ìš”í•  ê²ƒ ê°™ë‹¤.
ì‚°ë„˜ì–´ ì‚°.. í”„ë¡œì íŠ¸ê°€ ëë‚˜ë©´ ì •ë§ CSê³µë¶€ì™€ ì´ë•Œê¹Œì§€ ê°œë…ì´ ì •ë¦½ë˜ì§€ ëª»í•œ ë¶€ë¶„ì„ í™•ì‹¤í•˜ê²Œ ì§šì–´ê°€ì•¼í•  ë“¯ í•˜ë‹¤..